define(["require","underscore","text!./selectMulti.html"],function(e){function r(e){return{replace:!0,template:n,require:["^?piqPage","ngModel"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData"},link:function(n,r,i,s){var o=n.ctrl,u=s[1],a=n.data;o.registerModel(u,{dflt:[]}),u.$isEmpty=function(){return t.isEmpty(u.$viewValue)},n.quest={answers:e(n.data.answers||[],n.data)},t.each(n.quest.answers,function(e){~t.indexOf(n.response,e.value)&&(e.chosen=!0)}),n.data.buttons?n.data.style="horizontal":n.data.style=="horizontal"&&(n.data.buttons=!0),n.listCss={},n.listItemCss={};switch(a.style){case"horizontal":n.listClass="btn-group btn-group-justified btn-group-lg",n.listItemClass="btn btn-select";break;case"multiButtons":n.listClass="btn-toolbar",n.listItemClass="btn  btn-select",n.listCss.lineHeight=2.8;break;case"list":default:n.listClass="list-group",n.listItemClass="list-group-item"}a.minWidth&&(n.listItemCss.minWidth=a.minWidth),n.$watch("quest.answers",function(e,r){if(e===r)return;n.response=t(e).filter(function(e){return e.chosen}).pluck("value").value()},!0)}}}var t=e("underscore"),n=e("text!./selectMulti.html");return r.$inject=["questSelectMixer"],r});