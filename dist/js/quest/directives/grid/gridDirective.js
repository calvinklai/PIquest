define(["require","underscore","text!./grid.html"],function(e){function n(n){function r(e){return t(e||[]).map(s).each(function(t,n){t.hasOwnProperty("value")||(t.value=n+1)}).value()}function i(e,r){return t(e||[]).map(s).each(function(t,n){t.hasOwnProperty("name")||(t.name=r.name+o(n+1,3))}).thru(r.shuffle?n:t.identity).value()}function s(e){return t.isPlainObject(e)?e:{stem:e}}function o(e,t){var n=Math.abs(e),r=1+Math.floor(Math.log(n)/Math.LN10);if(r>=t)return e;var i=Math.pow(10,t-r).toString().substr(1);return e<0?"-"+i+n:i+n}return{template:e("text!./grid.html"),require:["ngModel"],controller:"questController",controllerAs:"ctrl",scope:{data:"=questData",current:"=questCurrent"},link:function(e,n,s,o){var u=o[0],a=e.ctrl,f=e.data;e.columns=r(f.columns),e.rows=i(f.rows,f),e.$watchCollection(function(){return t.pluck(e.rows,"$response")},function(r){e.response=t.reduce(r,function(e,n){return t.isFinite(n)?e+n:e},0)}),a.registerModel(u,{dflt:0})}}}var t=e("underscore");return n.$inject=["questShuffle"],n});