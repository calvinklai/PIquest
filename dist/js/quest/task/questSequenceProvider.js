define(["require","underscore"],function(e){function n(){function e(e,t){if(!t)throw new Error("Sequences need to take a db as the second argument");this.sequence=t.sequence("pages",e),this.db=t}return t.extend(e.prototype,{next:function(e){return this.sequence.next(e),this},prev:function(e){return this.sequence.prev(e),this},current:function(e){var n,r=this.sequence.current(e);if(!r)return r;r.questions?n=t.isArray(r.questions)?r.questions:[r.questions]:n=[];var i=this.db.sequence("questions",n).all({pagesData:r.data,pagesMeta:r.$meta});return r=t.clone(r,!0),r.questions=i,r}}),e}var t=e("underscore");return n});