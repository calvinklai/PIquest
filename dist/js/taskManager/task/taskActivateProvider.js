define(["require","underscore"],function(e){function n(){var e={};this.$get=r,this.set=function(n,r){e[n]=r},this.get=function(t){return e[t]}}function r(e,n,r){function s(s,o,u,a){var f,l=e.defer(),c=n.global;t.isFunction(o)&&(f=o),!f&&t.isFunction(o.play)&&(f=t.bind(o.play,o)),!f&&s.type&&(f=i.get(s.type));if(!t.isFunction(f))throw new Error('Activator function not found for the "'+s.type+'" task');return f(t.bind(l.resolve,l),{task:s,script:o,$element:u,$scope:a,global:c,$injector:r}),l.promise}var i=this;return s}var t=e("underscore");return r.$inject=["$q","$rootScope","$injector"],n});