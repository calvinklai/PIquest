define(["require","angular","underscore","./taskActivateProvider","./taskDirective"],function(e){var t=e("angular"),n=t.module("pi.task",[]),r=e("underscore");return n.provider("taskActivate",e("./taskActivateProvider")),n.directive("piTask",e("./taskDirective")),n.config(["taskActivateProvider",function(e){function t(e,t,n,r,i,s){var o;return s.name&&(i.name=s.name),n.script=i,t.append("<div pi-quest></div>"),o=t.contents(),r(o)(n),o.controller("piQuest").task.promise["finally"](function(){e()}),function(){o.scope().$destroy(),o.remove()}}t.$inject=["done","$element","$scope","$compile","script","task"],e.set("quest",t)}]),n.config(["taskActivateProvider",function(e){function t(e,t,n,r,i){var s;return r.script=n,t.append("<div pi-message></div>"),s=t.contents(),i(s)(r),r.$on("message:done",function(){e()}),function(){r.$destroy(),s.remove()}}t.$inject=["done","$element","task","$scope","$compile"],e.set("message",t)}]),n.config(["taskActivateProvider",function(e){function t(e,t,n,i){var s,o;return o=requirejs.config({context:r.uniqueId(),baseUrl:"../bower_components/PIPlayer/dist/js",paths:{text:["//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.3/text.min","../../bower_components/requirejs-text/text"],jquery:["//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min","../../bower_components/jquery/dist/jquery.min"],underscore:["//cdnjs.cloudflare.com/ajax/libs/lodash.js/3.5.0/lodash.min","../../bower_components/lodash-compat/lodash.min"],backbone:["//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min","../../bower_components/backbone/backbone"]},deps:["jquery","backbone","underscore"]}),n.name&&(i.name=n.name),t.append("<div pi-player></div>"),s=t.contents(),s.addClass("pi-spinner"),o(["activatePIP"],function(t){s.removeClass("pi-spinner"),t(i,e)}),function(){s.remove(),o(["app/task/main_view"],function(e){e.deferred.resolve(),e.destroy()})}}t.$inject=["done","$element","task","script"],e.set("pip",t)}]),n});