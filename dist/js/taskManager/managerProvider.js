define(["require","underscore"],function(e){function n(e,n,r,i){function s(e,t){var n=this;if(!(this instanceof s))return new s(e,t);this.$scope=e,this.script=t,this.sequence=r(t),e.$on("manager:next",function(){n.next.call()}),e.$on("manager:prev",function(){n.prev.call()})}return t.extend(s.prototype,{next:function(){var e=this.sequence.next();this.load(e)},prev:function(){var e=this.sequence.prev();this.load(e)},current:function(){var e=this.sequence.current()||{};return e.$script},load:function(e){var t=this.$scope;i(e).then(function(){t.$emit("manager:loaded")})}}),s}var t=e("underscore");return n.$inject=["$rootScope","$q","managerSequence","taskLoad"],n});