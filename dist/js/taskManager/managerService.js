define(["require","underscore"],function(e){function n(e,n,r,i,s){function o(e,t){var n=this,i;if(!(this instanceof o))return new o(e,t);this.$scope=e,this.script=t,i=s(t.settings&&t.settings.canvas),this.sequence=new r(t),e.$on("manager:next",function(){n.next()}),e.$on("manager:prev",function(){n.prev()}),e.$on("$destroy",i)}return t.extend(o.prototype,{next:function(){this.sequence.next(),this.load()},prev:function(){this.sequence.prev(),this.load()},current:function(){var e=this.sequence.current();return e},load:function(){var e=this.current(),t=this.$scope;e?i(e,this.baseUrl).then(function(){t.$emit("manager:loaded")}):t.$emit("manager:loaded")},setBaseUrl:function(e){this.baseUrl=e}}),o}var t=e("underscore");return n.$inject=["$rootScope","$q","managerSequence","managerTaskLoad","managerCanvas"],n});