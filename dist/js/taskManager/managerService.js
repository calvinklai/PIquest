define(["require","underscore"],function(e){function n(e,n,r,i,s,o){function u(e,t){var n=this,i;if(!(this instanceof u))return new u(e,t);this.$scope=e,this.script=t,this.sequence=new r(t),i=s(t.settings&&t.settings.canvas),e.$on("$destroy",i),t.settings&&t.settings.title&&(o[0].title=t.settings.title),e.$on("manager:next",function(){n.next()}),e.$on("manager:prev",function(){n.prev()})}return t.extend(u.prototype,{next:function(){this.sequence.next(),this.load()},prev:function(){this.sequence.prev(),this.load()},current:function(){var e=this.sequence.current();return e},load:function(){var e=this.current(),t=this.$scope;e?i(e,this.baseUrl).then(function(){t.$emit("manager:loaded")}):t.$emit("manager:loaded")},setBaseUrl:function(e){this.baseUrl=e}}),u}var t=e("underscore");return n.$inject=["$rootScope","$q","managerSequence","managerTaskLoad","managerCanvas","$document"],n});