define(["require","underscore"],function(e){function n(e){function r(e,n,r){r||(r={});var s=e.deepTemplate;return t.forEach(e,function(e,r,o){o[r]=i(e,n,{deep:t.includes(s,r)})}),e}function i(e,r,s){var o=s&&s.deep;return t.isString(e)?n(e,r):o&&t.isArray(e)?t.map(e,t.bind(i,null,t,r,s)):o&&t.isPlainObject(e)?t.mapValues(e,t.bind(i,null,t,r,s)):e}var n=e("template");return r}var t=e("underscore");return n.$inject=["$filter"],n});