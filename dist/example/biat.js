define(["pipAPI","pipScorer"],function(e,t){var n=new e,r="Pleasant",i="Unpleasant",s="Black People",o="White People",u="Birds",a="Mammals";n.addSettings("canvas",{maxWidth:1e3,proportions:.8,background:"white",canvasBackground:"green",borderWidth:5,borderColor:"black"}),n.addSettings("base_url",{image:"example/images",template:"../example/IAT"}),n.addSettings("logger",{pulse:20,url:"/implicit/PiPlayerApplet"}),n.addTrialSets("Default",{data:{score:0},input:[{handle:"enter",on:"enter"},{handle:"out",on:"keypressed",key:"e"},{handle:"in",on:"keypressed",key:"i"},{handle:"out",on:"leftTouch",touch:!0},{handle:"in",on:"rightTouch",touch:!0}],interactions:[{conditions:[{type:"begin"}],actions:[{type:"showStim",handle:"targetStim"}]},{conditions:[{type:"inputEqualsStim",property:"side"}],actions:[{type:"removeInput",handle:["in","out"]},{type:"hideStim",handle:"All"},{type:"log"},{type:"trigger",handle:"end",duration:250}]},{conditions:[{type:"inputEqualsStim",property:"side",negate:!0},{type:"inputEquals",value:["in","out"]}],actions:[{type:"showStim",handle:"error"},{type:"setTrialAttr",setter:{score:1}}]},{conditions:[{type:"inputEquals",value:"end"}],actions:[{type:"endTrial"}]},{conditions:[{type:"inputEquals",value:"enter"}],actions:[{type:"goto",destination:"nextWhere",properties:{blockStart:!0}},{type:"endTrial"}]}]}),n.addTrialSets({category1attribute1:{inherit:"Default",data:{condition:s+"+"+r,parcel:"first"},layout:[{inherit:{type:"byData",set:"layout",data:"out"}},{inherit:{type:"byData",set:"layout",data:"in"}},{inherit:{type:"byData",set:"layout",data:"top"},media:s},{inherit:{type:"byData",set:"layout",data:"separator"}},{inherit:{type:"byData",set:"layout",data:"bottom"},media:r}],stimuli:[{inherit:{type:"exRandom",set:"category1_attribute1"}},{inherit:{type:"random",set:"feedback"}}]},category1attribute1Practice:[{inherit:"Default",data:{condition:s+"+"+r},layout:[{inherit:{type:"byData",set:"layout",data:"out"}},{inherit:{type:"byData",set:"layout",data:"in"}},{inherit:{type:"byData",set:"layout",data:"top"},media:s},{inherit:{type:"byData",set:"layout",data:"separator"}},{inherit:{type:"byData",set:"layout",data:"bottom"},media:r}],stimuli:[{inherit:{type:"exRandom",set:"practice_category1"}},{inherit:{type:"random",set:"feedback"}}]}],category2attribute1:[{data:{condition:o+"+"+r,parcel:"first"},layout:[{inherit:{type:"byData",set:"layout",data:"out"}},{inherit:{type:"byData",set:"layout",data:"in"}},{inherit:{type:"byData",set:"layout",data:"top"},media:o},{inherit:{type:"byData",set:"layout",data:"separator"}},{inherit:{type:"byData",set:"layout",data:"bottom"},media:r}],inherit:"Default",stimuli:[{inherit:{type:"exRandom",set:"category2_attribute1"}},{inherit:{type:"random",set:"feedback"}}]}],category2attribute1Practice:[{inherit:"Default",data:{condition:o+"+"+r},layout:[{inherit:{type:"byData",set:"layout",data:"out"}},{inherit:{type:"byData",set:"layout",data:"in"}},{inherit:{type:"byData",set:"layout",data:"top"},media:o},{inherit:{type:"byData",set:"layout",data:"separator"}},{inherit:{type:"byData",set:"layout",data:"bottom"},media:r}],stimuli:[{inherit:{type:"exRandom",set:"practice_category2"}},{inherit:{type:"random",set:"feedback"}}]}],practiceBlock:[{inherit:"Default",data:{condition:"example"},layout:[{inherit:{type:"byData",set:"layout",data:"out"}},{inherit:{type:"byData",set:"layout",data:"in"}},{inherit:{type:"byData",set:"layout",data:"top"},media:u},{inherit:{type:"byData",set:"layout",data:"separator"}},{inherit:{type:"byData",set:"layout",data:"bottom"},media:r}],stimuli:[{inherit:{type:"exRandom",set:"example"}},{inherit:{type:"random",set:"feedback"}}]}]}),n.addTrialSets("introduction",{data:{block:"generic"},input:[{handle:"space",on:"space"},{handle:"enter",on:"enter"},{handle:"space",on:"bottomTouch",touch:!0}],layout:[{inherit:{type:"byData",set:"layout",data:"out"}},{inherit:{type:"byData",set:"layout",data:"in"}}],interactions:[{conditions:[{type:"begin"}],actions:[{type:"showStim",handle:"All"}]},{conditions:[{type:"inputEquals",value:"space"}],actions:[{type:"endTrial"}]},{conditions:[{type:"inputEquals",value:"enter"}],actions:[{type:"goto",destination:"nextWhere",properties:{blockStart:!0}},{type:"endTrial"}]}]}),n.addStimulusSets({Default:[{css:{color:"white","font-size":"2em"}}],Instructions:[{css:{"font-size":"1.3em",color:"black",lineHeight:1.2}}],category1_attribute1:[{data:{side:"in",handle:"targetStim",alias:r},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute1"}}},{data:{side:"out",handle:"targetStim",alias:i},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute2"}}},{data:{side:"in",handle:"targetStim",alias:s},inherit:"Default",media:{inherit:{type:"exRandom",set:"category1"}}},{data:{side:"out",handle:"targetStim",alias:o},inherit:"Default",media:{inherit:{type:"exRandom",set:"category2"}}}],category2_attribute1:[{data:{side:"in",handle:"targetStim",alias:r},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute1"}}},{data:{side:"out",handle:"targetStim",alias:i},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute2"}}},{data:{side:"out",handle:"targetStim",alias:s},inherit:"Default",media:{inherit:{type:"exRandom",set:"category1"}}},{data:{side:"in",handle:"targetStim",alias:o},inherit:"Default",media:{inherit:{type:"exRandom",set:"category2"}}}],example:[{data:{side:"in",handle:"targetStim",alias:r},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute1"}}},{data:{side:"out",handle:"targetStim",alias:i},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute2"}}},{data:{side:"in",handle:"targetStim",alias:u},inherit:"Default",media:{inherit:{type:"exRandom",set:"practiceCategory1"}}},{data:{side:"out",handle:"targetStim",alias:a},inherit:"Default",media:{inherit:{type:"exRandom",set:"practiceCategory2"}}}],practice_category1:[{data:{side:"in",handle:"targetStim",alias:s},inherit:"Default",media:{inherit:{type:"exRandom",set:"category1"}}},{data:{side:"out",handle:"targetStim",alias:o},inherit:"Default",media:{inherit:{type:"exRandom",set:"category2"}}}],practice_category2:[{data:{side:"out",handle:"targetStim",alias:s},inherit:"Default",media:{inherit:{type:"exRandom",set:"category1"}}},{data:{side:"in",handle:"targetStim",alias:o},inherit:"Default",media:{inherit:{type:"exRandom",set:"category2"}}}],feedback:[{handle:"error",location:{top:80},css:{color:"red","font-size":"4em"},media:{word:"X"},nolog:!0}],layout:[{data:{handle:"out"},location:{left:5,top:3},media:{word:"out: e"},css:{color:"black","font-size":"1em"}},{data:{handle:"in"},location:{right:5,top:3},media:{word:"in: i"},css:{color:"black","font-size":"1em"}},{data:{handle:"top"},location:{top:6},css:{color:"black","font-size":"2em"}},{data:{handle:"separator"},location:{top:14},css:{color:"black","font-size":"2em"},media:"or"},{data:{handle:"bottom"},location:{top:22},css:{color:"black","font-size":"2em"}}]}),n.addMediaSets({attribute1:[{word:"Nice"},{word:"Heaven"},{word:"Happy"},{word:"Pleasure"}],attribute2:[{word:"Nasty"},{word:"Hell"},{word:"Horrible"},{word:"Rotten"}],category1:[{image:"bf14_nc.jpg"},{image:"bf23_nc.jpg"},{image:"bf56_nc.jpg"},{image:"bm14_nc.jpg"}],category2:[{image:"wf2_nc.jpg"},{image:"wf3_nc.jpg"},{image:"wf6_nc.jpg"},{image:"wm1_nc.jpg"}],practiceCategory1:[{image:"ctsduck.jpg"},{image:"ctsparrot.jpg"},{image:"ctsrobin.jpg"},{image:"ctssparrow.jpg"}],practiceCategory2:[{image:"ctsbison.jpg"},{image:"ctsgiraffe.jpg"},{image:"ctshippo.jpg"},{image:"ctsrhino.jpg"}]});var f=[{data:{block:0,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst1.jst"}}]},{mixer:"repeat",times:16,data:[{inherit:"practiceBlock",data:{block:0}}]},{data:{block:1,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst2.jst"}}]},{mixer:"repeat",times:4,data:[{inherit:"category1attribute1Practice",data:{block:1}}]},{mixer:"repeat",times:16,data:[{inherit:"category1attribute1",data:{block:1}}]},{data:{block:2,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst3.jst"}}]},{mixer:"repeat",times:4,data:[{inherit:"category2attribute1Practice",data:{block:2}}]},{mixer:"repeat",times:16,data:[{inherit:"category2attribute1",data:{block:2}}]},{data:{block:3,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:{inherit:"Instructions",media:{template:"inst2.jst"}}},{mixer:"repeat",times:4,data:[{inherit:"category1attribute1Practice",data:{block:3}}]},{mixer:"repeat",times:16,data:[{inherit:"category1attribute1",data:{block:3,parcel:"second"}}]},{data:{block:4,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:{inherit:"Instructions",media:{template:"inst3.jst"}}},{mixer:"repeat",times:4,data:[{inherit:"category2attribute1Practice",data:{block:4}}]},{mixer:"repeat",times:16,data:[{inherit:"category2attribute1",data:{block:4,parcel:"second"}}]},{data:{block:5,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst2.jst"}}]},{mixer:"repeat",times:4,data:[{inherit:"category1attribute1Practice",data:{block:5}}]},{mixer:"repeat",times:16,data:[{inherit:"category1attribute1",data:{block:5,parcel:"third"}}]},{data:{block:6,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst3.jst"}}]},{mixer:"repeat",times:4,data:[{inherit:"category2attribute1Practice",data:{block:6}}]},{mixer:"repeat",times:16,data:[{inherit:"category2attribute1",data:{block:6,parcel:"third"}}]},{data:{block:7,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst2.jst"}}]},{mixer:"repeat",times:4,data:[{inherit:"category1attribute1Practice",data:{block:7}}]},{mixer:"repeat",times:16,data:[{inherit:"category1attribute1",data:{block:7,parcel:"fourth"}}]},{data:{block:8,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:{inherit:"Instructions",media:{template:"inst3.jst"}}},{mixer:"repeat",times:4,data:[{inherit:"category2attribute1Practice",data:{block:8}}]},{mixer:"repeat",times:16,data:[{inherit:"category2attribute1",data:{block:8,parcel:"fourth"}}]}],l=[{data:{block:0,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst1.jst"}}]},{mixer:"repeat",times:16,data:[{inherit:"practiceBlock",data:{block:0}}]},{data:{block:1,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst3.jst"}}]},{mixer:"repeat",times:4,data:[{inherit:"category2attribute1Practice",data:{block:1}}]},{mixer:"repeat",times:16,data:[{inherit:"category2attribute1",data:{block:1}}]},{data:{block:2,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst2.jst"}}]},{mixer:"repeat",times:4,data:[{inherit:"category1attribute1Practice",data:{block:2}}]},{mixer:"repeat",times:16,data:[{inherit:"category1attribute1",data:{block:2}}]},{data:{block:3,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:{inherit:"Instructions",media:{template:"inst3.jst"}}},{mixer:"repeat",times:4,data:[{inherit:"category2attribute1Practice",data:{block:3}}]},{mixer:"repeat",times:16,data:[{inherit:"category2attribute1",data:{block:3,parcel:"second"}}]},{data:{block:4,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:{inherit:"Instructions",media:{template:"inst2.jst"}}},{mixer:"repeat",times:4,data:[{inherit:"category1attribute1Practice",data:{block:4}}]},{mixer:"repeat",times:16,data:[{inherit:"category1attribute1",data:{block:4,parcel:"second"}}]},{data:{block:5,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst3.jst"}}]},{mixer:"repeat",times:4,data:[{inherit:"category2attribute1Practice",data:{block:5}}]},{mixer:"repeat",times:16,data:[{inherit:"category2attribute1",data:{block:5,parcel:"third"}}]},{data:{block:6,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst2.jst"}}]},{mixer:"repeat",times:4,data:[{inherit:"category1attribute1Practice",data:{block:6}}]},{mixer:"repeat",times:16,data:[{inherit:"category1attribute1",data:{block:6,parcel:"third"}}]},{data:{block:7,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst3.jst"}}]},{mixer:"repeat",times:4,data:[{inherit:"category2attribute1Practice",data:{block:7}}]},{mixer:"repeat",times:16,data:[{inherit:"category2attribute1",data:{block:7,parcel:"fourth"}}]},{data:{block:8,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:{inherit:"Instructions",media:{template:"inst2.jst"}}},{mixer:"repeat",times:4,data:[{inherit:"category1attribute1Practice",data:{block:8}}]},{mixer:"repeat",times:16,data:[{inherit:"category1attribute1",data:{block:8,parcel:"fourth"}}]}];return n.addSequence([{mixer:"choose",data:[{mixer:"wrapper",data:f},{mixer:"wrapper",data:l}]},{data:{blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[],customize:function(){var e,n,r,i=this;e=t.computeD();var s=e.DScore;t.addSettings("compute",{parcelValue:["second"]}),e=t.computeD();var o=e.DScore;t.addSettings("compute",{parcelValue:["third"]}),e=t.computeD();var u=e.DScore;t.addSettings("compute",{parcelValue:["fourth"]}),e=t.computeD();var a=e.DScore;!isNaN(o)&&!isNaN(o)&&!isNaN(u)&&!isNaN(a)?(r=(parseFloat(s)+parseFloat(o)+parseFloat(u)+parseFloat(a))/4,isNaN(r)?n=e.errorMessage:n=t.getFBMsg(r)):(n=e.errorMessage,r="");var f={css:{color:"black"},media:{html:'<div><p style="font-size:28px"><color="#FFFAFA"> '+n+"<br>The Score is:"+r+"</p></div>"}};i.stimuli.push(f),t.postToServer(r,n,"score","feedback")}},{data:{blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{data:{handle:"instStim"},css:{color:"black"},media:{html:'<div><p style="font-size:28px"><color="#FFFAFA">You have completed the study<br/><br/>Thank you very much for your participation.<br/><br/> Press "space" for continue to next task.</p></div>'}}]}]),t.addSettings("compute",{ErrorVar:"score",condVar:"condition",cond1VarValues:[s+"+"+r],cond2VarValues:[o+"+"+r],parcelVar:"parcel",parcelValue:["first"],fastRT:150,maxFastTrialsRate:.1,minRT:400,maxRT:1e3,errorLatency:{use:"latency",penalty:600,useForSTD:!0},postSettings:{score:"score",msg:"feedback",url:"/implicit/scorer"}}),t.addSettings("message",{MessageDef:[{cut:"-0.65",message:"Your data suggest a strong implicit preference for Black People compared to White People"},{cut:"-0.35",message:"Your data suggest a moderate implicit preference for Black People compared to White People."},{cut:"-0.15",message:"Your data suggest a slight implicit preference for Black People compared to White People."},{cut:"0.15",message:"Your data suggest little to no difference in implicit preference between Black People and White People."},{cut:"0.35",message:"Your data suggest a slight implicit preference for White People compared to Black People"},{cut:"0.65",message:"Your data suggest a moderate implicit preference for White People compared to Black People"},{cut:"3",message:"Your data suggest a strong implicit preference for White People compared to Black People"}]}),n.script});