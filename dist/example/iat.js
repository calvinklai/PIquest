define(["pipAPI","pipScorer"],function(e,t){var n=new e,r="Good Words",i="Bad Words",s="Black People",o="White People";n.addSettings("canvas",{maxWidth:800,proportions:.8}),n.addSettings("base_url",{image:"example/images",template:"../example/IAT"}),n.addSettings("logger",{pulse:20,url:"/implicit/PiPlayerApplet"}),n.addTrialSets("Default",{data:{score:0},input:[{handle:"enter",on:"enter"},{handle:"left",on:"keypressed",key:"e"},{handle:"right",on:"keypressed",key:"i"},{handle:"left",on:"leftTouch",touch:!0},{handle:"right",on:"rightTouch",touch:!0}],layout:[{inherit:{type:"byData",set:"layout",data:"left"}},{inherit:{type:"byData",set:"layout",data:"right"}}],interactions:[{conditions:[{type:"begin"}],actions:[{type:"showStim",handle:"target"}]},{conditions:[{type:"inputEqualsStim",property:"side"}],actions:[{type:"removeInput",handle:["left","right"]},{type:"hideStim",handle:"All"},{type:"log"},{type:"setInput",input:{handle:"end",on:"timeout",duration:250}}]},{conditions:[{type:"inputEquals",value:["right","left"]},{type:"inputEqualsStim",property:"side",negate:!0}],actions:[{type:"showStim",handle:"error"},{type:"setTrialAttr",setter:{score:1}}]},{conditions:[{type:"inputEquals",value:"end"}],actions:[{type:"endTrial"}]},{conditions:[{type:"inputEquals",value:"enter"}],actions:[{type:"goto",destination:"nextWhere",properties:{blockStart:!0}},{type:"endTrial"}]}]}),n.addTrialSets("introduction",{data:{block:"generic"},input:[{handle:"space",on:"space"},{handle:"space",on:"bottomTouch",touch:!0},{handle:"enter",on:"enter"}],layout:[{inherit:{type:"byData",set:"layout",data:"left"}},{inherit:{type:"byData",set:"layout",data:"right"}}],interactions:[{conditions:[{type:"begin"}],actions:[{type:"showStim",handle:"All"}]},{conditions:[{type:"inputEquals",value:"space"}],actions:[{type:"endTrial"}]},{conditions:[{type:"inputEquals",value:"enter"}],actions:[{type:"goto",destination:"nextWhere",properties:{blockStart:!0}},{type:"endTrial"}]}]}),n.addTrialSets("IAT",[{data:{block:1,left2:s,right2:o,condition:s+"/"+o},inherit:"Default",stimuli:[{inherit:{type:"exRandom",set:"concept1_left"}},{inherit:{type:"random",set:"feedback"}}]},{data:{block:2,left1:r,right1:i,condition:r+"/"+i},inherit:"Default",stimuli:[{inherit:{type:"exRandom",set:"attribute1_left"}},{inherit:{type:"random",set:"feedback"}}]},{data:{block:3,row:1,left1:r,right1:i,left2:s,right2:o,condition:r+","+s+"/"+i+","+o,parcel:"first"},inherit:"Default",stimuli:[{inherit:{type:"exRandom",set:"concept1_left"}},{inherit:{type:"random",set:"feedback"}}]},{data:{block:3,row:2,left1:r,right1:i,left2:s,right2:o,condition:r+","+s+"/"+i+","+o,parcel:"first"},inherit:"Default",stimuli:[{inherit:{type:"exRandom",set:"attribute1_left"}},{inherit:{type:"random",set:"feedback"}}]},{data:{block:4,row:1,left1:r,right1:i,left2:s,right2:o,condition:r+","+s+"/"+i+","+o,parcel:"second"},inherit:"Default",stimuli:[{inherit:{type:"exRandom",set:"concept1_left"}},{inherit:{type:"random",set:"feedback"}}]},{data:{block:4,row:2,left1:r,right1:i,left2:s,right2:o,condition:r+","+s+"/"+i+","+o,parcel:"second"},inherit:"Default",stimuli:[{inherit:{type:"exRandom",set:"attribute1_left"}},{inherit:{type:"random",set:"feedback"}}]},{data:{block:5,left2:o,right2:s,condition:o+"/"+s},inherit:"Default",stimuli:[{inherit:{type:"exRandom",set:"concept1_right"}},{inherit:{type:"random",set:"feedback"}}]},{data:{block:6,row:1,left1:r,right1:i,left2:o,right2:s,condition:r+","+o+"/"+i+","+s,parcel:"first"},inherit:"Default",stimuli:[{inherit:{type:"exRandom",set:"concept1_right"}},{inherit:{type:"random",set:"feedback"}}]},{data:{block:6,row:2,left1:r,right1:i,left2:o,right2:s,condition:r+","+o+"/"+i+","+s,parcel:"first"},inherit:"Default",stimuli:[{inherit:{type:"exRandom",set:"attribute1_left"}},{inherit:{type:"random",set:"feedback"}}]},{data:{block:7,row:1,left1:r,right1:i,left2:o,right2:s,condition:r+","+o+"/"+i+","+s,parcel:"second"},inherit:"Default",stimuli:[{inherit:{type:"exRandom",set:"concept1_right"}},{inherit:{type:"random",set:"feedback"}}]},{data:{block:7,row:2,left1:r,right1:i,left2:o,right2:s,condition:r+","+o+"/"+i+","+s,parcel:"second"},inherit:"Default",stimuli:[{inherit:{type:"exRandom",set:"attribute1_left"}},{inherit:{type:"random",set:"feedback"}}]}]),n.addStimulusSets({Default:[{css:{color:"#0000FF","font-size":"2em"}}],Instructions:[{css:{"font-size":"1.3em",color:"black",lineHeight:1.2},handle:"instructions"}],attribute1_left:[{data:{side:"left",handle:"target",alias:r},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute1"}}},{data:{side:"right",handle:"target",alias:i},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute2"}}},{data:{side:"left",handle:"target",alias:r},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute1"}}},{data:{side:"right",handle:"target",alias:i},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute2"}}},{data:{side:"left",handle:"target",alias:r},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute1"}}},{data:{side:"right",handle:"target",alias:i},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute2"}}},{data:{side:"left",handle:"target",alias:r},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute1"}}},{data:{side:"right",handle:"target",alias:i},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute2"}}},{data:{side:"left",handle:"target",alias:r},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute1"}}},{data:{side:"right",handle:"target",alias:i},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute2"}}}],attribute1_right:[{data:{side:"left",handle:"target",alias:i},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute2"}}},{data:{side:"right",handle:"target",alias:r},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute1"}}},{data:{side:"left",handle:"target",alias:i},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute2"}}},{data:{side:"right",handle:"target",alias:r},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute1"}}},{data:{side:"left",handle:"target",alias:i},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute2"}}},{data:{side:"right",handle:"target",alias:r},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute1"}}},{data:{side:"left",handle:"target",alias:i},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute2"}}},{data:{side:"right",handle:"target",alias:r},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute1"}}},{data:{side:"left",handle:"target",alias:i},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute2"}}},{data:{side:"right",handle:"target",alias:r},inherit:"Default",media:{inherit:{type:"exRandom",set:"attribute1"}}}],concept1_left:[{data:{side:"left",handle:"target",alias:s},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept1"}}},{data:{side:"right",handle:"target",alias:o},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept2"}}},{data:{side:"left",handle:"target",alias:s},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept1"}}},{data:{side:"right",handle:"target",alias:o},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept2"}}},{data:{side:"left",handle:"target",alias:s},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept1"}}},{data:{side:"right",handle:"target",alias:o},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept2"}}},{data:{side:"left",handle:"target",alias:s},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept1"}}},{data:{side:"right",handle:"target",alias:o},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept2"}}},{data:{side:"left",handle:"target",alias:s},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept1"}}},{data:{side:"right",handle:"target",alias:o},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept2"}}}],concept1_right:[{data:{side:"left",handle:"target",alias:o},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept2"}}},{data:{side:"right",handle:"target",alias:s},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept1"}}},{data:{side:"left",handle:"target",alias:o},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept2"}}},{data:{side:"right",handle:"target",alias:s},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept1"}}},{data:{side:"left",handle:"target",alias:o},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept2"}}},{data:{side:"right",handle:"target",alias:s},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept1"}}},{data:{side:"left",handle:"target",alias:o},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept2"}}},{data:{side:"right",handle:"target",alias:s},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept1"}}},{data:{side:"left",handle:"target",alias:o},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept2"}}},{data:{side:"right",handle:"target",alias:s},inherit:"Default",media:{inherit:{type:"exRandom",set:"concept1"}}}],feedback:[{handle:"error",location:{top:80},css:{color:"red","font-size":"4em"},media:{word:"X"},nolog:!0}],layout:[{data:{handle:"left"},location:{left:0,top:0},css:{color:"white",fontSize:"2em"},media:{template:"left.jst"}},{data:{handle:"right"},location:{left:"auto",right:0,top:0},css:{color:"white",fontSize:"2em"},media:{template:"right.jst"}}]}),n.addMediaSets({attribute1:[{word:"Nice"},{word:"Heaven"},{word:"Happy"},{word:"Pleasaure"}],attribute2:[{word:"Nasty"},{word:"Hell"},{word:"Horrible"},{word:"Rotten"}],concept1:[{image:"bf14_nc.jpg"},{image:"bf23_nc.jpg"},{image:"bf56_nc.jpg"},{image:"bm14_nc.jpg"}],concept2:[{image:"wf2_nc.jpg"},{image:"wf3_nc.jpg"},{image:"wf6_nc.jpg"},{image:"wm1_nc.jpg"}]});var u=[{data:{block:1,left2:s,right2:o,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst1.jst"}}]},{mixer:"repeat",times:20,data:[{inherit:{type:"byData",data:{block:1},set:"IAT"}}]},{data:{block:2,left1:r,right1:i,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst2.jst"}}]},{mixer:"repeat",times:20,data:[{inherit:{type:"byData",data:{block:2},set:"IAT"}}]},{data:{block:3,left1:r,right1:i,left2:s,right2:o,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst3.jst"}}]},{mixer:"repeat",times:20,data:[{inherit:{type:"byData",data:{block:3,row:1},set:"IAT"}},{inherit:{type:"byData",data:{block:3,row:2},set:"IAT"}}]},{data:{block:4,left1:r,right1:i,left2:s,right2:o,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst4.jst"}}]},{mixer:"repeat",times:40,data:[{inherit:{type:"byData",data:{block:4,row:1},set:"IAT"}},{inherit:{type:"byData",data:{block:4,row:2},set:"IAT"}}]},{data:{block:5,left2:o,right2:s,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst5.jst"}}]},{mixer:"repeat",times:40,data:[{inherit:{type:"byData",data:{block:5},set:"IAT"}}]},{data:{block:6,left1:r,right1:i,left2:o,right2:s,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst6.jst"}}]},{mixer:"repeat",times:20,data:[{inherit:{type:"byData",data:{block:6,row:1},set:"IAT"}},{inherit:{type:"byData",data:{block:6,row:2},set:"IAT"}}]},{data:{block:7,left1:r,right1:i,left2:o,right2:s,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst7.jst"}}]},{mixer:"repeat",times:20,data:[{inherit:{type:"byData",data:{block:7,row:1},set:"IAT"}},{inherit:{type:"byData",data:{block:7,row:2},set:"IAT"}}]}],a=[{data:{block:5,left2:o,right2:s,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst1.jst"}}]},{mixer:"repeat",times:20,data:[{inherit:{type:"byData",data:{block:5},set:"IAT"}}]},{data:{block:2,left1:r,right1:i,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst2.jst"}}]},{mixer:"repeat",times:20,data:[{inherit:{type:"byData",data:{block:2},set:"IAT"}}]},{data:{block:6,left1:r,right1:i,left2:o,right2:s,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst3.jst"}}]},{mixer:"repeat",times:20,data:[{inherit:{type:"byData",data:{block:6,row:1},set:"IAT"}},{inherit:{type:"byData",data:{block:6,row:2},set:"IAT"}}]},{data:{block:7,left1:r,right1:i,left2:o,right2:s,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst4.jst"}}]},{mixer:"repeat",times:20,data:[{inherit:{type:"byData",data:{block:7,row:1},set:"IAT"}},{inherit:{type:"byData",data:{block:7,row:2},set:"IAT"}}]},{data:{block:1,left2:s,right2:o,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst5.jst"}}]},{mixer:"repeat",times:20,data:[{inherit:{type:"byData",data:{block:1},set:"IAT"}}]},{data:{block:3,left1:r,right1:i,left2:s,right2:o,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst6.jst"}}]},{mixer:"repeat",times:20,data:[{inherit:{type:"byData",data:{block:3,row:1},set:"IAT"}},{inherit:{type:"byData",data:{block:3,row:2},set:"IAT"}}]},{data:{block:4,left1:r,right1:i,left2:s,right2:o,blockStart:!0},inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{inherit:"Instructions",media:{template:"inst7.jst"}}]},{mixer:"repeat",times:20,data:[{inherit:{type:"byData",data:{block:4,row:1},set:"IAT"}},{inherit:{type:"byData",data:{block:4,row:2},set:"IAT"}}]}];return n.addSequence([{mixer:"choose",data:[{mixer:"wrapper",data:u},{mixer:"wrapper",data:a}]},{inherit:{set:"introduction",type:"byData",data:{block:"generic"}},data:{blockStart:!0},stimuli:[],customize:function(){var e=this,n,r;console.log("calling Scorer"),n=t.computeD(),r={css:{color:"black"},media:{html:'<div><p style="font-size:12px;color:#FFFAFA"> '+n.FBMsg+"<br>The Score is:"+n.DScore+"</p></div>"}},e.stimuli.push(r),t.postToServer(n.DScore,n.FBMsg,"score1","feedback1"),t.addSettings("compute",{parcelValue:["second"]}),t.addSettings("message",{MessageDef:[{cut:"-0.65",message:"Your data suggest a strong implicit preference for Black People compared to White People"},{cut:"-0.35",message:"Your data suggest a moderate implicit preference for Black People compared to White People."},{cut:"-0.15",message:"Your data suggest a slight implicit preference for Black People compared to White People."},{cut:"0.15",message:"Your data suggest little to no difference in implicit preference between Black People and White People."},{cut:"0.35",message:"Your data suggest a slight implicit preference for White People compared to Black People"},{cut:"0.65",message:"Your data suggest a moderate implicit preference for White People compared to Black People"},{cut:"5",message:"Your data suggest a strong implicit preference for White People compared to Black People"}]}),n=t.computeD(),r={css:{color:"black"},media:{html:'<h1><div><p style="font-size:12px;color=#FFFAFA>'+n.FBMsg+"<br>The Score is:"+n.DScore+"</p></div>"}},e.stimuli.push(r),t.postToServer(n.DScore,n.FBMsg,"score1","feedback1")}},{inherit:{set:"introduction",type:"byData",data:{block:"generic"}},stimuli:[{data:{handle:"instStim"},css:{color:"black"},media:{html:'<div><p style="font-size:28px;color:#FFFAFA">You have completed the study<br/><br/>Thank you very much for your participation.<br/><br/> Press "space" to continue to next task.</p></div>'}}]}]),t.addSettings("compute",{ErrorVar:"score",condVar:"condition",cond1VarValues:[r+","+s+"/"+i+","+o],cond2VarValues:[r+","+o+"/"+i+","+s],parcelVar:"parcel",parcelValue:["first"],fastRT:150,maxFastTrialsRate:.1,minRT:400,maxRT:1e4,errorLatency:{use:"latency",penalty:600,useForSTD:!0},postSettings:{score:"score",msg:"feedback",url:"/implicit/scorer"}}),t.addSettings("message",{MessageDef:[{cut:"-0.65",message:"Your data suggest a strong implicit preference for Black People compared to White People"},{cut:"-0.35",message:"Your data suggest a moderate implicit preference for Black People compared to White People."},{cut:"-0.15",message:"Your data suggest a slight implicit preference for Black People compared to White People."},{cut:"0.15",message:"Your data suggest little to no difference in implicit preference between Black People and White People."},{cut:"0.35",message:"Your data suggest a slight implicit preference for White People compared to Black People"},{cut:"0.65",message:"Your data suggest a moderate implicit preference for White People compared to Black People"},{cut:"5",message:"Your data suggest a strong implicit preference for White People compared to Black People"}]}),n.script});