define(["underscore"],function(e){function t(t,n,r){function i(){this._cache={random:{},exRandom:{},sequential:{}}}function s(n,r,i){var s=this._cache.random;return i&&!e.isUndefined(s[r])?s[r]:(s[r]=t(n),s[r])}function o(t,n,i){var s=this._cache.sequential,o=s[n],u;if(e.isUndefined(o))return o=s[n]=new r(e.range(t)),o.first();if(o.length!==t)throw new Error("This seed  ("+n+") points to a collection with the wrong length, you can only use a seed for sets of the same length");return i?o.current():(u=o.next(),e.isUndefined(u)?o.first():u)}function u(t,i,s){var o=this._cache.exRandom,u=o[i],a;if(e.isUndefined(u))return u=o[i]=new r(n(t)),u.first();if(u.length!==t)throw new Error("This seed  ("+i+") points to a collection with the wrong length, you can only use a seed for sets of the same length");return s?u.current():(a=u.next(),e.isUndefined(a)?(u=o[i]=new r(n(t)),u.first()):a)}return e.extend(i.prototype,{random:s,exRandom:u,sequential:o}),i}return t.$inject=["randomizeInt","randomizeRange","Collection"],t});