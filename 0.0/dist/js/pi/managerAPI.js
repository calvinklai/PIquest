define(["require","taskManager/API","underscore"],function(e){function i(){t.call(this),this.settings.onPreTask=s}function s(e,t){var n,i={taskName:e.name||"namelessTask",taskNumber:e.$meta.number};if(e.type=="quest"||e.type=="pip")n=e.$script.settings,n.logger=n.logger||{},n.logger.meta=angular.extend(n.logger.meta||{},i);return e.last&&(i.sessionStatus="C"),r?!0:t.post("/implicit/PiManager",i)}var t=e("taskManager/API"),n=e("underscore"),r=/^(localhost|127.0.0.1)/.test(location.host);return n.extend(i.prototype,t.prototype),s.$inject=["currentTask","$http"],i});