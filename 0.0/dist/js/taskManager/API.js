define(["require","underscore"],function(e){function n(){this.script={settings:{},tasks:[],sequence:[],global:{},current:{}},this.settings=this.script.settings}var t=e("underscore");return t.extend(n.prototype,{addSettings:function(e,n){var r;return t.isPlainObject(n)?(r=this.script.settings[e]=this.script.settings[e]||{},t.extend(r,n)):this.script.settings[e]=n,this},addTasksSet:function(e,n){var r=this.script;return t.isArray(n)||(n=[n]),t.each(n,function(t){t.set=e,r.tasks.push(t)}),this},addSequence:function(e){var n=this.script;return t.isArray(e)||(e=[e]),n.sequence=n.sequence.concat(e),this},addGlobal:function(e){if(!t.isPlainObject(e))throw new Error("global must be an object");t.merge(this.script.global,e)},addCurrent:function(e){if(!t.isPlainObject(e))throw new Error("current must be an object");t.merge(this.script.current,e)}}),n});